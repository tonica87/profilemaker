<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿå¾’ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆãƒ„ãƒ¼ãƒ«</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-gray-100">
    <div class="max-w-6xl mx-auto p-6 bg-white">
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">ç”Ÿå¾’ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆãƒ„ãƒ¼ãƒ«</h1>
            <p class="text-gray-600 mb-4">å…¥åŠ›ã•ã‚ŒãŸæƒ…å ±ã‚’æ•´ç†ã—ã¦ã€æŒ‡å®šã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æ²¿ã£ãŸæ–‡ç« ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™</p>
            
            <div class="bg-gray-100 p-4 rounded-lg">
                <div class="flex items-center gap-4">
                    <label class="flex items-center cursor-pointer bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        ğŸ“ JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
                        <input type="file" accept=".json" id="jsonFileInput" class="hidden">
                    </label>
                    <span class="text-sm text-gray-600">
                        ä¿å­˜ã—ãŸç”Ÿå¾’ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ç·¨é›†ãŒã§ãã¾ã™
                    </span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="space-y-6">
                <!-- 1. ç”Ÿå¾’å -->
                <div class="bg-orange-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold mb-4 text-orange-800">ç”Ÿå¾’å</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç”Ÿå¾’æ°å</label>
                            <input type="text" id="studentName" placeholder="ä¾‹: é«˜ç”°å²æ‹“" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç‰¹è¨“ç¨®åˆ¥ãƒ»ç§‘ç›®</label>
                            <input type="text" id="trainingType" placeholder="å€‹åˆ¥Sè‹±èª" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ‹…å½“</label>
                            <input type="text" id="instructor" placeholder="æ‹…å½“åã‚’å…¥åŠ›" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
                        </div>
                    </div>
                </div>

                <!-- 2. åŸºæœ¬æƒ…å ± -->
                <div class="bg-blue-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold mb-4 text-blue-800">åŸºæœ¬æƒ…å ±</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å­¦å¹´</label>
                            <select id="grade" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="æ—¢å’">æ—¢å’</option>
                                <option value="é«˜æ ¡3å¹´ç”Ÿ">é«˜æ ¡3å¹´ç”Ÿ</option>
                                <option value="é«˜æ ¡2å¹´ç”Ÿ">é«˜æ ¡2å¹´ç”Ÿ</option>
                                <option value="é«˜æ ¡1å¹´ç”Ÿ">é«˜æ ¡1å¹´ç”Ÿ</option>
                                <option value="ä¸­å­¦3å¹´ç”Ÿ">ä¸­å­¦3å¹´ç”Ÿ</option>
                                <option value="ä¸­å­¦2å¹´ç”Ÿ">ä¸­å­¦2å¹´ç”Ÿ</option>
                                <option value="ä¸­å­¦1å¹´ç”Ÿ">ä¸­å­¦1å¹´ç”Ÿ</option>
                                <option value="ãã®ä»–">ãã®ä»–</option>
                                <option value="å­¦å¹´ã‚’è¨˜è¼‰ã—ãªã„">å­¦å¹´ã‚’è¨˜è¼‰ã—ãªã„</option>
                            </select>
                            <div id="gradeOtherContainer" class="mt-2 hidden">
                                <input type="text" id="gradeOther" placeholder="å­¦å¹´ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å­¦æ ¡åŒºåˆ†</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="flex items-center">
                                    <input type="radio" name="schoolType" value="å‡ºèº«æ ¡" checked class="mr-2">
                                    å‡ºèº«æ ¡
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="schoolType" value="åœ¨ç±æ ¡" class="mr-2">
                                    åœ¨ç±æ ¡
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="schoolType" value="å­¦æ ¡ã‚’è¨˜è¼‰ã—ãªã„" class="mr-2">
                                    å­¦æ ¡ã‚’è¨˜è¼‰ã—ãªã„
                                </label>
                            </div>
                        </div>
                        <div id="schoolContainer">
                            <label class="block text-sm font-medium text-gray-700 mb-1" id="schoolLabel">å‡ºèº«æ ¡</label>
                            <input type="text" id="school" placeholder="ä¾‹: éƒ½ç«‹ä¸Šé‡é«˜æ ¡" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å—é¨“ç§‘ç›®ï¼ˆå¾—æ„ãªé †ç•ªã§ï¼‰</label>
                            <input type="text" id="subjects" placeholder="ä¾‹: è‹±èª>æ—¥æœ¬å²>å›½èª(ç¾å¤æ¼¢)" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                </div>

                <!-- 3. å¿—æœ›æ ¡ -->
                <div class="bg-green-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold mb-4 text-green-800">å¿—æœ›æ ¡</h2>
                    <p class="text-sm text-green-700 mb-4">å¯èƒ½ãªé™ã‚Šå­¦éƒ¨å­¦ç§‘ã¾ã§</p>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç¬¬ä¸€å¿—æœ›ç¾¤</label>
                            <input type="text" id="firstChoice" placeholder="ä¾‹: æ—©ç¨²ç”°å¤§å­¦æ•™è‚²å­¦éƒ¨" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç¬¬äºŒå¿—æœ›ç¾¤</label>
                            <input type="text" id="secondChoice" placeholder="ä¾‹: ä¸­å¤®å¤§å­¦æ–‡å­¦éƒ¨" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç¬¬ä¸‰å¿—æœ›ç¾¤</label>
                            <input type="text" id="thirdChoice" placeholder="ä¾‹: æ—¥æœ¬å¤§å­¦æ–‡ç†å­¦éƒ¨" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>
                </div>

                <!-- 4. æœˆåˆ¥å­¦ç¿’åˆ°é”ç›®æ¨™ -->
                <div class="bg-yellow-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold mb-4 text-yellow-800">æœˆåˆ¥å­¦ç¿’åˆ°é”ç›®æ¨™</h2>
                    <p class="text-sm text-yellow-700 mb-4">â—‹æœˆâ—‹é€±ç›®ã®ã‚ˆã†ã«ç´°ã‹ãæ›¸ããŸã„å ´åˆã¯ä¸€åº¦ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆã—ã¦ã‹ã‚‰æ‰‹æ‰“ã¡ã§ä¿®æ­£ã—ã¦ãã ã•ã„</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">3æœˆæœ«</label>
                            <input type="text" id="march" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">4æœˆæœ«</label>
                            <input type="text" id="april" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">5æœˆæœ«</label>
                            <input type="text" id="may" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">6æœˆæœ«</label>
                            <input type="text" id="june" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">7æœˆæœ«</label>
                            <input type="text" id="july" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">8æœˆæœ«</label>
                            <input type="text" id="august" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">9æœˆæœ«</label>
                            <input type="text" id="september" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">10æœˆæœ«</label>
                            <input type="text" id="october" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">11æœˆæœ«</label>
                            <input type="text" id="november" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">12æœˆæœ«</label>
                            <input type="text" id="december" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">1æœˆæœ«</label>
                            <input type="text" id="january" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">2æœˆæœ«</label>
                            <input type="text" id="february" placeholder="ä¾‹: æ—¥å¤§ãƒ¬ãƒ™ãƒ«è§£é‡ˆã¾ã§å®Œæˆ" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        </div>
                    </div>
                </div>

                <!-- 5. ç›´è¿‘ã®æ¨¡è©¦ã®æˆç¸¾ -->
                <div class="bg-purple-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold mb-4 text-purple-800">ç›´è¿‘ã®æ¨¡è©¦ã®æˆç¸¾</h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">å®Ÿæ–½æ—¥</label>
                                <input type="text" id="examDate" placeholder="ä¾‹: 4/25" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">æ¨¡è©¦å</label>
                                <input type="text" id="examName" placeholder="ä¾‹: ç¬¬2å›å…¨çµ±å…±é€šãƒ†ã‚¹ãƒˆæ¨¡è©¦" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                        
                        <div id="examSubjects">
                            <div class="exam-subject-item" data-index="0">
                                <div class="flex items-center justify-between mb-2">
                                    <label class="block text-sm font-medium text-gray-700">è‹±èª</label>
                                </div>
                                <div class="grid grid-cols-3 gap-2 mb-4">
                                    <input type="text" placeholder="å¾—ç‚¹" class="score-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <input type="text" placeholder="æº€ç‚¹" class="total-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <input type="text" placeholder="åå·®å€¤" class="deviation-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-2 mb-4">
                            <input type="text" id="newSubject" placeholder="ç§‘ç›®åã‚’å…¥åŠ›" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <button type="button" id="addSubjectBtn" class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors">
                                è¿½åŠ 
                            </button>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ãã®ä»–ç§‘ç›®</label>
                            <textarea id="examOther" placeholder="ãã®ä»–ã®ç§‘ç›®ãŒã‚ã‚‹å ´åˆã¯è¨˜å…¥" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500" rows="2"></textarea>
                        </div>
                    </div>
                </div>

                <!-- 6. è©¦é¨“æ—¥ç¨‹ -->
                <div class="bg-red-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold mb-4 text-red-800">è©¦é¨“æ—¥ç¨‹</h2>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">æ¨¡æ“¬è©¦é¨“/è‹±æ¤œç­‰ã®æ—¥ç¨‹</label>
                        <textarea id="examSchedule" placeholder="ä¾‹:&#10;6/28 é§¿å°ãƒ™ãƒãƒƒã‚»æ¨¡è©¦&#10;8/24 æ²³åˆå¡¾å…¨çµ±ãƒãƒ¼ã‚¯æ¨¡è©¦&#10;8/31 æ²³åˆå¡¾å…¨çµ±è¨˜è¿°æ¨¡è©¦" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" rows="4"></textarea>
                    </div>
                </div>

                <!-- 7. 1æ—¥ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚° -->
                <div class="bg-indigo-50 p-6 rounded-lg">
                    <h2 class="text-xl font-semibold mb-4 text-indigo-800">1æ—¥ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">å„ç§‘ç›®ã®ç›®æ¨™å‹‰å¼·æ™‚é–“</label>
                            
                            <div id="studySubjects">
                                <div class="study-subject-item" data-index="0">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="block text-sm font-medium text-gray-700">è‹±èª</label>
                                    </div>
                                    <div class="flex items-center gap-2 mb-4">
                                        <input type="text" placeholder="4" class="hours-input w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                        <span class="text-gray-600">æ™‚é–“</span>
                                    </div>
                                </div>
                            </div>

                            <div class="flex gap-2 mb-4">
                                <input type="text" id="newStudySubject" placeholder="ç§‘ç›®åã‚’å…¥åŠ›" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <button type="button" id="addStudySubjectBtn" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors">
                                    è¿½åŠ 
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">èµ·åºŠæ™‚é–“</label>
                                <input type="text" id="wakeTime" placeholder="7:30" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">å°±å¯æ™‚é–“</label>
                                <input type="text" id="sleepTime" placeholder="23:30" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨˜å…¥</label>
                            <textarea id="schedule" placeholder="ä¾‹:&#10;6:30 èµ·åºŠ&#10;7:00-8:00 æœé£Ÿãƒ»æº–å‚™&#10;8:00-12:00 åˆå‰å­¦ç¿’&#10;12:00-13:00 æ˜¼é£Ÿãƒ»ä¼‘æ†©" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-y" rows="4"></textarea>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-4">
                    <button id="generateBtn" class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold">
                        ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆ
                    </button>
                    <button id="downloadBtn" class="flex items-center justify-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                        ğŸ’¾ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                    </button>
                    <button id="clearBtn" class="flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        ğŸ”„ ã‚¯ãƒªã‚¢
                    </button>
                </div>
            </div>

            <div class="space-y-6">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-semibold text-gray-800">ä½œæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
                        <button id="copyBtn" class="flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors hidden">
                            ğŸ“‹ ã‚³ãƒ”ãƒ¼
                        </button>
                    </div>
                    <div id="helpText" class="bg-blue-50 p-3 rounded-lg mb-4 hidden">
                        <ul class="text-sm text-blue-700 space-y-1">
                            <li>â€¢ ä½œæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã¯ç›´æ¥ç·¨é›†å¯èƒ½ã§ã™</li>
                            <li>â€¢ ã€Œã‚³ãƒ”ãƒ¼ã€ãƒœã‚¿ãƒ³ã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã§ãã¾ã™</li>
                            <li>â€¢ å¿…è¦ã«å¿œã˜ã¦æ‰‹å‹•ã§èª¿æ•´ãƒ»è¿½è¨˜ã—ã¦ãã ã•ã„</li>
                            <li>â€¢ æ¨¡è©¦çµæœã‚„å­¦ç¿’é€²æ—ã«å¿œã˜ã¦å®šæœŸçš„ã«æ›´æ–°ã—ã¦ãã ã•ã„</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg border min-h-96">
                        <textarea id="generatedText" class="w-full h-96 p-3 text-sm text-gray-800 font-mono leading-relaxed border-none resize-none focus:outline-none hidden" placeholder="ä½œæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™"></textarea>
                        <p id="placeholderText" class="text-gray-500 text-center py-8">
                            å·¦å´ã®ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã—ã¦ã€Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons (removed as we're using emoji instead)
        // lucide.createIcons();

        // State management
        let examSubjectsCount = 1;
        let studySubjectsCount = 1;

        // DOM elements
        const elements = {
            grade: document.getElementById('grade'),
            gradeOtherContainer: document.getElementById('gradeOtherContainer'),
            gradeOther: document.getElementById('gradeOther'),
            schoolType: document.querySelectorAll('input[name="schoolType"]'),
            schoolContainer: document.getElementById('schoolContainer'),
            schoolLabel: document.getElementById('schoolLabel'),
            school: document.getElementById('school'),
            examSubjects: document.getElementById('examSubjects'),
            newSubject: document.getElementById('newSubject'),
            addSubjectBtn: document.getElementById('addSubjectBtn'),
            studySubjects: document.getElementById('studySubjects'),
            newStudySubject: document.getElementById('newStudySubject'),
            addStudySubjectBtn: document.getElementById('addStudySubjectBtn'),
            generateBtn: document.getElementById('generateBtn'),
            downloadBtn: document.getElementById('downloadBtn'),
            clearBtn: document.getElementById('clearBtn'),
            copyBtn: document.getElementById('copyBtn'),
            generatedText: document.getElementById('generatedText'),
            placeholderText: document.getElementById('placeholderText'),
            helpText: document.getElementById('helpText'),
            jsonFileInput: document.getElementById('jsonFileInput')
        };

        // Event listeners
        elements.grade.addEventListener('change', handleGradeChange);
        elements.schoolType.forEach(radio => {
            radio.addEventListener('change', handleSchoolTypeChange);
        });
        elements.addSubjectBtn.addEventListener('click', addExamSubject);
        elements.addStudySubjectBtn.addEventListener('click', addStudySubject);
        elements.generateBtn.addEventListener('click', generateProfile);
        elements.downloadBtn.addEventListener('click', downloadJSON);
        elements.clearBtn.addEventListener('click', clearForm);
        elements.copyBtn.addEventListener('click', copyToClipboard);
        elements.jsonFileInput.addEventListener('change', loadFromJSON);

        function handleGradeChange() {
            const shouldShow = elements.grade.value === 'ãã®ä»–';
            elements.gradeOtherContainer.classList.toggle('hidden', !shouldShow);
        }

        function handleSchoolTypeChange() {
            const selectedValue = document.querySelector('input[name="schoolType"]:checked').value;
            const shouldHide = selectedValue === 'å­¦æ ¡ã‚’è¨˜è¼‰ã—ãªã„';
            elements.schoolContainer.classList.toggle('hidden', shouldHide);
            elements.schoolLabel.textContent = selectedValue;
        }

        function addExamSubject() {
            const subjectName = elements.newSubject.value.trim();
            if (!subjectName) return;

            // Check if subject already exists
            const existingSubjects = Array.from(elements.examSubjects.querySelectorAll('.exam-subject-item'))
                .map(item => item.querySelector('label').textContent);
            if (existingSubjects.includes(subjectName)) return;

            const subjectDiv = document.createElement('div');
            subjectDiv.className = 'exam-subject-item';
            subjectDiv.setAttribute('data-index', examSubjectsCount);
            subjectDiv.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <label class="block text-sm font-medium text-gray-700">${subjectName}</label>
                    <button type="button" onclick="removeExamSubject(${examSubjectsCount})" class="text-red-600 hover:text-red-800 text-sm">å‰Šé™¤</button>
                </div>
                <div class="grid grid-cols-3 gap-2 mb-4">
                    <input type="text" placeholder="å¾—ç‚¹" class="score-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <input type="text" placeholder="æº€ç‚¹" class="total-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <input type="text" placeholder="åå·®å€¤" class="deviation-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
            `;

            elements.examSubjects.appendChild(subjectDiv);
            elements.newSubject.value = '';
            examSubjectsCount++;
        }

        function removeExamSubject(index) {
            const subjectItem = document.querySelector(`.exam-subject-item[data-index="${index}"]`);
            if (subjectItem && elements.examSubjects.children.length > 1) {
                subjectItem.remove();
            }
        }

        function addStudySubject() {
            const subjectName = elements.newStudySubject.value.trim();
            if (!subjectName) return;

            // Check if subject already exists
            const existingSubjects = Array.from(elements.studySubjects.querySelectorAll('.study-subject-item'))
                .map(item => item.querySelector('label').textContent);
            if (existingSubjects.includes(subjectName)) return;

            const subjectDiv = document.createElement('div');
            subjectDiv.className = 'study-subject-item';
            subjectDiv.setAttribute('data-index', studySubjectsCount);
            subjectDiv.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <label class="block text-sm font-medium text-gray-700">${subjectName}</label>
                    <button type="button" onclick="removeStudySubject(${studySubjectsCount})" class="text-red-600 hover:text-red-800 text-sm">å‰Šé™¤</button>
                </div>
                <div class="flex items-center gap-2 mb-4">
                    <input type="text" placeholder="4" class="hours-input w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <span class="text-gray-600">æ™‚é–“</span>
                </div>
            `;

            elements.studySubjects.appendChild(subjectDiv);
            elements.newStudySubject.value = '';
            studySubjectsCount++;
        }

        function removeStudySubject(index) {
            const subjectItem = document.querySelector(`.study-subject-item[data-index="${index}"]`);
            if (subjectItem && elements.studySubjects.children.length > 1) {
                subjectItem.remove();
            }
        }

        function generateProfile() {
            let profile = 'â—†ç”Ÿå¾’ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«\n';
            
            // Student basic info
            const grade = elements.grade.value;
            const gradeOther = elements.gradeOther.value;
            const gradeDisplay = grade === 'ãã®ä»–' ? gradeOther : 
                                grade === 'å­¦å¹´ã‚’è¨˜è¼‰ã—ãªã„' ? '' : grade;
            if (gradeDisplay) {
                profile += 'å­¦å¹´: ' + gradeDisplay + '\n';
            }
            
            const schoolType = document.querySelector('input[name="schoolType"]:checked').value;
            const school = elements.school.value.trim();
            if (schoolType !== 'å­¦æ ¡ã‚’è¨˜è¼‰ã—ãªã„' && school) {
                profile += schoolType + ': ' + school + '\n';
            }
            
            const subjects = document.getElementById('subjects').value.trim();
            if (subjects) {
                profile += 'å—é¨“ç§‘ç›®ï¼ˆå¾—æ„ãªé †ç•ªã§ï¼‰: ' + subjects + '\n';
            }
            
            // Academic goals
            profile += '\nâ—†å¿—æœ›æ ¡\n';
            const firstChoice = document.getElementById('firstChoice').value.trim();
            const secondChoice = document.getElementById('secondChoice').value.trim();
            const thirdChoice = document.getElementById('thirdChoice').value.trim();
            
            if (firstChoice) profile += 'ç¬¬ä¸€å¿—æœ›ç¾¤: ' + firstChoice + '\n';
            if (secondChoice) profile += 'ç¬¬äºŒå¿—æœ›ç¾¤: ' + secondChoice + '\n';
            if (thirdChoice) profile += 'ç¬¬ä¸‰å¿—æœ›ç¾¤: ' + thirdChoice + '\n';
            
            // Monthly goals
            profile += '\nâ—†1ãƒ¶æœˆã”ã¨ã®å­¦ç¿’åˆ°é”ç›®æ¨™\n';
            const monthIds = ['march', 'april', 'may', 'june', 'july', 'august', 
                             'september', 'october', 'november', 'december', 'january', 'february'];
            const monthNames = ['3æœˆæœ«', '4æœˆæœ«', '5æœˆæœ«', '6æœˆæœ«', '7æœˆæœ«', '8æœˆæœ«',
                               '9æœˆæœ«', '10æœˆæœ«', '11æœˆæœ«', '12æœˆæœ«', '1æœˆæœ«', '2æœˆæœ«'];
            
            const monthlyGoals = [];
            monthIds.forEach((monthId, index) => {
                const goal = document.getElementById(monthId).value.trim();
                if (goal) {
                    monthlyGoals.push('(' + monthNames[index] + '): ' + goal);
                }
            });
            
            if (monthlyGoals.length > 0) {
                profile += monthlyGoals.join('\n') + '\n';
            }
            
            // Exam results
            profile += '\nâ—†ç›´è¿‘ã®æ¨¡è©¦ã®æˆç¸¾\n';
            const examDate = document.getElementById('examDate').value.trim();
            const examName = document.getElementById('examName').value.trim();
            if (examDate || examName) {
                profile += examDate + ' ' + examName + '\n';
            }
            
            // Exam subjects
            const examSubjectItems = elements.examSubjects.querySelectorAll('.exam-subject-item');
            examSubjectItems.forEach(item => {
                const subjectName = item.querySelector('label').textContent;
                const score = item.querySelector('.score-input').value;
                const total = item.querySelector('.total-input').value;
                const deviation = item.querySelector('.deviation-input').value;
                
                if (score || total || deviation) {
                    profile += subjectName + 'ã€€' + score + '/' + total + 'ï¼ˆ' + deviation + 'ï¼‰\n';
                }
            });
            
            const examOther = document.getElementById('examOther').value.trim();
            if (examOther) {
                profile += examOther + '\n';
            }
            
            // Exam schedule
            profile += '\nâ—†æ¨¡æ“¬è©¦é¨“/è‹±æ¤œç­‰ã®æ—¥ç¨‹\n';
            const examSchedule = document.getElementById('examSchedule').value.trim();
            if (examSchedule) {
                profile += examSchedule + '\n';
            }
            
            // Daily schedule
            profile += '\nâ—†1æ—¥ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°\n';
            profile += 'â‘ å„ç§‘ç›®ã®ç›®æ¨™å‹‰å¼·æ™‚é–“: ';
            
            const studyTimes = [];
            const studySubjectItems = elements.studySubjects.querySelectorAll('.study-subject-item');
            studySubjectItems.forEach(item => {
                const subjectName = item.querySelector('label').textContent;
                const hours = item.querySelector('.hours-input').value;
                
                if (hours) {
                    studyTimes.push(subjectName + hours + 'æ™‚é–“');
                }
            });
            
            if (studyTimes.length > 0) {
                profile += studyTimes.join(' ');
            }
            profile += '\n\n';
            
            const wakeTime = document.getElementById('wakeTime').value;
            const sleepTime = document.getElementById('sleepTime').value;
            if (wakeTime || sleepTime) {
                profile += 'â‘¡èµ·åºŠæ™‚é–“ / å°±å¯æ™‚é–“ : ' + wakeTime + ' / ' + sleepTime + '\n\n';
            }
            
            const schedule = document.getElementById('schedule').value.trim();
            if (schedule) {
                profile += 'â‘¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«:\n' + schedule;
            }

            // Update UI
            elements.generatedText.value = profile;
            elements.generatedText.classList.remove('hidden');
            elements.placeholderText.classList.add('hidden');
            elements.copyBtn.classList.remove('hidden');
            elements.helpText.classList.remove('hidden');
        }

        function copyToClipboard() {
            elements.generatedText.select();
            elements.generatedText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(elements.generatedText.value);
        }

        function downloadJSON() {
            try {
                // Get current date and time
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                const timestamp = `${year}${month}${day}_${hours}${minutes}${seconds}`;

                // Sanitize filename
                const sanitize = (str) => str.replace(/[<>:"/\\|?*]/g, '_').trim() || 'æœªå…¥åŠ›';
                const studentName = sanitize(document.getElementById('studentName').value);
                const trainingType = sanitize(document.getElementById('trainingType').value);
                const instructor = sanitize(document.getElementById('instructor').value);
                const filename = `${studentName}_${trainingType}_${instructor}_${timestamp}.json`;

                // Collect form data
                const formData = collectFormData();
                formData.createdAt = now.toISOString();
                formData.version = '1.0';

                // Create and download JSON file
                const jsonString = JSON.stringify(formData, null, 2);
                const blob = new Blob([jsonString], { 
                    type: 'application/json;charset=utf-8' 
                });
                
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                link.style.display = 'none';
                
                document.body.appendChild(link);
                link.click();
                
                setTimeout(() => {
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                }, 100);
                
                console.log('ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–‹å§‹:', filename);
                
            } catch (error) {
                console.error('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
                alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
            }
        }

        function collectFormData() {
            // Basic info
            const grade = elements.grade.value;
            const formData = {
                studentName: document.getElementById('studentName').value,
                trainingType: document.getElementById('trainingType').value,
                instructor: document.getElementById('instructor').value,
                grade: grade,
                gradeOther: elements.gradeOther.value,
                schoolType: document.querySelector('input[name="schoolType"]:checked').value,
                school: elements.school.value,
                subjects: document.getElementById('subjects').value,
                firstChoice: document.getElementById('firstChoice').value,
                secondChoice: document.getElementById('secondChoice').value,
                thirdChoice: document.getElementById('thirdChoice').value,
                monthlyGoals: {
                    march: document.getElementById('march').value,
                    april: document.getElementById('april').value,
                    may: document.getElementById('may').value,
                    june: document.getElementById('june').value,
                    july: document.getElementById('july').value,
                    august: document.getElementById('august').value,
                    september: document.getElementById('september').value,
                    october: document.getElementById('october').value,
                    november: document.getElementById('november').value,
                    december: document.getElementById('december').value,
                    january: document.getElementById('january').value,
                    february: document.getElementById('february').value
                },
                examResults: {
                    date: document.getElementById('examDate').value,
                    examName: document.getElementById('examName').value,
                    subjects: [],
                    other: document.getElementById('examOther').value
                },
                examSchedule: document.getElementById('examSchedule').value,
                studyTime: {
                    subjects: []
                },
                wakeTime: document.getElementById('wakeTime').value,
                sleepTime: document.getElementById('sleepTime').value,
                schedule: document.getElementById('schedule').value
            };

            // Collect exam subjects
            const examSubjectItems = elements.examSubjects.querySelectorAll('.exam-subject-item');
            examSubjectItems.forEach(item => {
                const name = item.querySelector('label').textContent;
                const score = item.querySelector('.score-input').value;
                const total = item.querySelector('.total-input').value;
                const deviation = item.querySelector('.deviation-input').value;
                formData.examResults.subjects.push({ name, score, total, deviation });
            });

            // Collect study subjects
            const studySubjectItems = elements.studySubjects.querySelectorAll('.study-subject-item');
            studySubjectItems.forEach(item => {
                const name = item.querySelector('label').textContent;
                const hours = item.querySelector('.hours-input').value;
                formData.studyTime.subjects.push({ name, hours });
            });

            return formData;
        }

        function loadFromJSON(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const jsonData = JSON.parse(e.target.result);
                    
                    if (jsonData.version && jsonData.version !== '1.0') {
                        alert('ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚');
                        return;
                    }

                    populateForm(jsonData);
                    alert(`ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚\nç”Ÿå¾’å: ${jsonData.studentName || 'æœªå…¥åŠ›'}`);
                    
                } catch (error) {
                    alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ­£ã—ã„JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                    console.error('JSONèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                }
            };
            
            reader.readAsText(file);
            event.target.value = '';
        }

        function populateForm(data) {
            // Basic info
            document.getElementById('studentName').value = data.studentName || '';
            document.getElementById('trainingType').value = data.trainingType || '';
            document.getElementById('instructor').value = data.instructor || '';
            elements.grade.value = data.grade || '';
            elements.gradeOther.value = data.gradeOther || '';
            
            // School type
            if (data.schoolType) {
                const schoolTypeRadio = document.querySelector(`input[name="schoolType"][value="${data.schoolType}"]`);
                if (schoolTypeRadio) schoolTypeRadio.checked = true;
            }
            elements.school.value = data.school || '';
            
            document.getElementById('subjects').value = data.subjects || '';
            document.getElementById('firstChoice').value = data.firstChoice || '';
            document.getElementById('secondChoice').value = data.secondChoice || '';
            document.getElementById('thirdChoice').value = data.thirdChoice || '';

            // Monthly goals
            if (data.monthlyGoals) {
                Object.keys(data.monthlyGoals).forEach(month => {
                    const element = document.getElementById(month);
                    if (element) element.value = data.monthlyGoals[month] || '';
                });
            }

            // Exam results
            if (data.examResults) {
                document.getElementById('examDate').value = data.examResults.date || '';
                document.getElementById('examName').value = data.examResults.examName || '';
                document.getElementById('examOther').value = data.examResults.other || '';
                
                // Clear existing exam subjects and add from data
                elements.examSubjects.innerHTML = '';
                examSubjectsCount = 0;
                
                if (data.examResults.subjects && data.examResults.subjects.length > 0) {
                    data.examResults.subjects.forEach(subject => {
                        addExamSubjectFromData(subject);
                    });
                } else {
                    // Add default English subject
                    addExamSubjectFromData({ name: 'è‹±èª', score: '', total: '', deviation: '' });
                }
            }

            document.getElementById('examSchedule').value = data.examSchedule || '';

            // Study time
            if (data.studyTime && data.studyTime.subjects) {
                elements.studySubjects.innerHTML = '';
                studySubjectsCount = 0;
                
                if (data.studyTime.subjects.length > 0) {
                    data.studyTime.subjects.forEach(subject => {
                        addStudySubjectFromData(subject);
                    });
                } else {
                    // Add default English subject
                    addStudySubjectFromData({ name: 'è‹±èª', hours: '' });
                }
            }

            document.getElementById('wakeTime').value = data.wakeTime || '';
            document.getElementById('sleepTime').value = data.sleepTime || '';
            document.getElementById('schedule').value = data.schedule || '';

            // Update UI state
            handleGradeChange();
            handleSchoolTypeChange();
        }

        function addExamSubjectFromData(subject) {
            const subjectDiv = document.createElement('div');
            subjectDiv.className = 'exam-subject-item';
            subjectDiv.setAttribute('data-index', examSubjectsCount);
            
            const deleteButton = examSubjectsCount === 0 ? '' : 
                `<button type="button" onclick="removeExamSubject(${examSubjectsCount})" class="text-red-600 hover:text-red-800 text-sm">å‰Šé™¤</button>`;
            
            subjectDiv.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <label class="block text-sm font-medium text-gray-700">${subject.name}</label>
                    ${deleteButton}
                </div>
                <div class="grid grid-cols-3 gap-2 mb-4">
                    <input type="text" value="${subject.score || ''}" placeholder="å¾—ç‚¹" class="score-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <input type="text" value="${subject.total || ''}" placeholder="æº€ç‚¹" class="total-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <input type="text" value="${subject.deviation || ''}" placeholder="åå·®å€¤" class="deviation-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
            `;

            elements.examSubjects.appendChild(subjectDiv);
            examSubjectsCount++;
        }

        function addStudySubjectFromData(subject) {
            const subjectDiv = document.createElement('div');
            subjectDiv.className = 'study-subject-item';
            subjectDiv.setAttribute('data-index', studySubjectsCount);
            
            const deleteButton = studySubjectsCount === 0 ? '' : 
                `<button type="button" onclick="removeStudySubject(${studySubjectsCount})" class="text-red-600 hover:text-red-800 text-sm">å‰Šé™¤</button>`;
            
            subjectDiv.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <label class="block text-sm font-medium text-gray-700">${subject.name}</label>
                    ${deleteButton}
                </div>
                <div class="flex items-center gap-2 mb-4">
                    <input type="text" value="${subject.hours || ''}" placeholder="4" class="hours-input w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <span class="text-gray-600">æ™‚é–“</span>
                </div>
            `;

            elements.studySubjects.appendChild(subjectDiv);
            studySubjectsCount++;
        }

        function clearForm() {
            // Clear all input fields
            document.querySelectorAll('input[type="text"], textarea').forEach(input => {
                input.value = '';
            });
            
            // Reset selects and radios
            elements.grade.value = '';
            document.querySelector('input[name="schoolType"][value="å‡ºèº«æ ¡"]').checked = true;
            
            // Reset dynamic sections
            elements.examSubjects.innerHTML = `
                <div class="exam-subject-item" data-index="0">
                    <div class="flex items-center justify-between mb-2">
                        <label class="block text-sm font-medium text-gray-700">è‹±èª</label>
                    </div>
                    <div class="grid grid-cols-3 gap-2 mb-4">
                        <input type="text" placeholder="å¾—ç‚¹" class="score-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <input type="text" placeholder="æº€ç‚¹" class="total-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <input type="text" placeholder="åå·®å€¤" class="deviation-input px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                </div>
            `;
            
            elements.studySubjects.innerHTML = `
                <div class="study-subject-item" data-index="0">
                    <div class="flex items-center justify-between mb-2">
                        <label class="block text-sm font-medium text-gray-700">è‹±èª</label>
                    </div>
                    <div class="flex items-center gap-2 mb-4">
                        <input type="text" placeholder="4" class="hours-input w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <span class="text-gray-600">æ™‚é–“</span>
                    </div>
                </div>
            `;
            
            examSubjectsCount = 1;
            studySubjectsCount = 1;
            
            // Reset output area
            elements.generatedText.value = '';
            elements.generatedText.classList.add('hidden');
            elements.placeholderText.classList.remove('hidden');
            elements.copyBtn.classList.add('hidden');
            elements.helpText.classList.add('hidden');
            
            // Update UI state
            handleGradeChange();
            handleSchoolTypeChange();
        }

        // Initialize the form
        handleSchoolTypeChange();
    </script>
</body>
</html>
